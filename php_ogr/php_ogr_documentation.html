<!DOCTYPE doctype PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
    
  <meta http-equiv="Content-Type"
 content="text/html; charset=iso-8859-1">
    
  <meta name="GENERATOR"
 content="Mozilla/4.72 [en] (X11; U; Linux 2.2.14-5.0 i686) [Netscape]">
  <title></title>
</head>
  <body>
  
<h1> <font face="Helvetica, Arial, sans-serif"><b><font size="+4">OGR/PHP
Extension</font></b></font></h1>
<font face="Helvetica, Arial, sans-serif"> &nbsp; </font>
<h2> <font face="Helvetica, Arial, sans-serif">Introduction</font></h2>
 <font face="Helvetica, Arial, sans-serif">The <a
 href="http://gdal.maptools.org/ogr/">OGR library </a>is a C++ open source
library (and command-line tools) providing read (and sometimes write) access
to a variety of vector <a
 href="http://gdal.maptools.org/ogr/ogr_formats.html">file formats</a>&nbsp;
including ESRI Shapefiles, S-57, SDTS, PostGIS, Oracle Spatial, and Mapinfo
mid/mif and TAB formats.</font> 
<p><font face="Helvetica, Arial, sans-serif">The C API is generally easy
to call from other languages which allow call out to DLLs functions, such
as Visual Basic, or Delphi.</font> </p>
<p><font face="Helvetica, Arial, sans-serif">The OGR/PHP extension enables
PHP users to access the functionalities included in the OGR library.&nbsp;
This extension can be used as built-in PHP or as dynamic library (".dll"
on Windows or ".so" on Unix).</font> </p>
<p><font face="Helvetica, Arial, sans-serif">This extension was developed
and is currently being maintained by <a
 href="http://www.dmsolutions.ca/">DM Solutions Group</a>.  Special thanks
go to Lars V. Nielsen and <a href="http://www.hvm.dk/">Hvenegaard &amp; Meklenborg</a>
for funding the initial development of this extension and allowing it to
remain open source.  <br>
&nbsp; </font></p>
<h2> <font face="Helvetica, Arial, sans-serif">Download</font></h2>
 <font face="Helvetica, Arial, sans-serif">To use the OGR/PHP extension,
the following is needed: <br>
&nbsp; </font>
<ul>
 <li> <font face="Helvetica, Arial, sans-serif">PHP 4.2.3 or higher</font></li>
  <li> <font face="Helvetica, Arial, sans-serif">GDAL library 1.1.8</font><br>
       <font face="Helvetica, Arial, sans-serif" size="-1">
         Note from OGR/PHP version 1.1.0, GDAL 1.3.0 is required.
       </font></li>
  <li> <font face="Helvetica, Arial, sans-serif">OGR/PHP extension module</font></li>
 
</ul>
  
<h4> <font face="Helvetica, Arial, sans-serif">PHP</font></h4>
 <font face="Helvetica, Arial, sans-serif">Check if you have PHP already
installed (several Linux distributions have it built in). <br>
</font><font face="Helvetica, Arial, sans-serif">If not, download the 4.2.3
or higher PHP version source code or binaries.</font> 
<p><font face="Helvetica, Arial, sans-serif">Source code and win32 binaries
are available on the <a href="http://www.php.net/downloads.php">PHP download 
</a>page.</font> </p>
<p><font face="Helvetica, Arial, sans-serif">The PHP source code is also
available via anonymous CVS, see the <a
 href="http://www.php.net/anoncvs.php">PHP cvs page</a>.</font> </p>
<h4> <font face="Helvetica, Arial, sans-serif">GDAL/OGR</font></h4>
<font face="Helvetica, Arial, sans-serif"> Visit the <a
 href="http://gdal.maptools.org/">GDAL website</a> to download the latest
version of the library. <br>
&nbsp; </font>
<h4> <font face="Helvetica, Arial, sans-serif">OGR/PHP</font></h4>
<font face="Helvetica, Arial, sans-serif"> Source code or Win32 dll for the
OGR/PHP extension can be obtained from DM Solutions.  The official download
location is still to be determined. </font>
<h2> <font face="Helvetica, Arial, sans-serif">Build/Installation/Test</font></h2>
  
<h4> <font face="Helvetica, Arial, sans-serif">GDAL</font></h4>
 <font face="Helvetica, Arial, sans-serif">GDAL library must be built before
compiling PHP and OGR/PHP extension.</font> 
<p><font face="Helvetica, Arial, sans-serif">Currently a build mechanism
only exists for Unix, and the C wrapper functions are built and installed
as a standard part of GDAL/OGR.&nbsp; It does live in the GDAL/OGR source
tree.</font> </p>
<p><font face="Helvetica, Arial, sans-serif">The source (such as a nightly
CVS snapshot) can be downloaded from the <a
 href="http://www.remotesensing.org/gdal/">GDAL/OGR web site</a>. <br>
</font><font face="Helvetica, Arial, sans-serif">Once unpacked, build GDAL/OGR
according to the <a
 href="http://www.remotesensing.org/gdal/gdal_building.html">provided instructions</a>,
and then install.</font> </p>
<p><font face="Helvetica, Arial, sans-serif">% cd gdal <br>
</font><font face="Helvetica, Arial, sans-serif">% ./configure <br>
</font><font face="Helvetica, Arial, sans-serif">... <br>
</font><font face="Helvetica, Arial, sans-serif">% make <br>
</font><font face="Helvetica, Arial, sans-serif">% sudo make install</font> 
</p>
<h4> <font face="Helvetica, Arial, sans-serif">PHP - OGR/PHP</font></h4>
 
<h4> <font face="Helvetica, Arial, sans-serif"><u>Building on Unix</u></font></h4>
<font face="Helvetica, Arial, sans-serif"><b>Recommendation</b><br>
<br>
There are two ways to build the OGR/PHP extension: &nbsp;as a separate module
(as a ".so" library) or as a built-in module. &nbsp;It is recommended to
use this extension as a separate module for simplicity reason and because
there is no need to compile PHP.<br>
<u><br>
Build as a separate module</u><br>
<br>
</font>
<ul>
  <li>     <font face="Helvetica, Arial, sans-serif">tar xzvf php_ogr_1.0.tar.gz
into the "ext" directory.</font></li>
  <li><font face="Helvetica, Arial, sans-serif">Run /path/to/phpize in the
OGR/PHP extension source directory.</font></li>
  <li><font face="Helvetica, Arial, sans-serif">Run ./configure --with-php-config=/path/to/php-config.</font></li>
  <li><font face="Helvetica, Arial, sans-serif">Run make in the OGR/PHP extension
directory.</font></li>
  <li><font face="Helvetica, Arial, sans-serif">Change directory to "modules"
under OGR/PHP extension.<br>
    </font></li>
  <li> <font face="Helvetica, Arial, sans-serif">Copy the ogr.so library
to your PHP extensions directory.</font></li>
  <li><font face="Helvetica, Arial, sans-serif">Rename the extension "php_ogr.so".&nbsp;</font></li>
  <li><font face="Helvetica, Arial, sans-serif">Use dl() function to load
the module at the beginning of your PHP scripts.</font></li>
</ul>
  <font face="Helvetica, Arial, sans-serif"><u>Build as a built-in module</u><br>
</font>  
<ul>
 <li> <font face="Helvetica, Arial, sans-serif">Installed the PHP source
code if not already installed.<br>
    </font></li>
  <li> <font face="Helvetica, Arial, sans-serif">tar xzvf php_ogr_1.0.tar.gz
into the "ext" directory.</font></li>
  <li> <font face="Helvetica, Arial, sans-serif">Run ./buildconf --force
in the PHP main directory.</font></li>
  <li> <font face="Helvetica, Arial, sans-serif">Run ./configure --with-ogr[=dir]
in the PHP main directory where dir is corresponding to the GDAL/OGR directory.</font></li>
  <li> <font face="Helvetica, Arial, sans-serif">Run make in the PHP main
directory.</font></li>
  <li><font face="Helvetica, Arial, sans-serif">PHP is now compiled with
OGR/PHP built-in.<br>
    </font></li>
  
</ul>
<p><font face="Helvetica, Arial, sans-serif"><br>
</font><font face="Helvetica, Arial, sans-serif">&nbsp;&nbsp;&nbsp; More
information can be found into the <a
 href="http://php.net/manual/en/install.unix.php">PHP manual</a>.</font> </p>
<h4> <font face="Helvetica, Arial, sans-serif"><u>Installing on Windows</u></font></h4>
  
<ul>
 <li><font face="Helvetica, Arial, sans-serif"> Unzip php-4.x.x-Win32.zip
into your prefered folder and follow the <a
 href="http://www.php.net/manual/en/install.windows.php">install instruction</a>.</font></li>
  <li><font face="Helvetica, Arial, sans-serif"> Unzip php_ogr_1.0.zip.</font></li>
  <li><font face="Helvetica, Arial, sans-serif"> Copy the 'dll' into your
extensions library folder.</font></li>
 
</ul>
  
<h4> <font face="Helvetica, Arial, sans-serif"><u>Testing all</u></font></h4>
 <font face="Helvetica, Arial, sans-serif">To verify that PHP and OGR/PHP
were installed properly, create a '.php' file containing the following code
and try to access it through your web server:</font> 
<p><font face="Helvetica, Arial, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&lt;HTML&gt; <br>
</font><font face="Helvetica, Arial, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&lt;BODY&gt;</font> </p>
<p><font face="Helvetica, Arial, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&lt;?php <br>
</font><font face="Helvetica, Arial, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
if (PHP_OS == "WINNT" || PHP_OS == "WIN32") <br>
</font><font face="Helvetica, Arial, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
{ <br>
</font><font face="Helvetica, Arial, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
dl("php_ogr.dll"); <br>
</font><font face="Helvetica, Arial, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
} <br>
</font><font face="Helvetica, Arial, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
else <br>
</font><font face="Helvetica, Arial, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
{ <br>
</font><font face="Helvetica, Arial, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
dl("php_ogr.so"); <br>
</font><font face="Helvetica, Arial, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
} <br>
</font><font face="Helvetica, Arial, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
phpinfo(); <br>
</font><font face="Helvetica, Arial, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
?&gt;</font> </p>
<p><font face="Helvetica, Arial, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&lt;/BODY&gt; <br>
</font><font face="Helvetica, Arial, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&lt;/HTML&gt; <br>
&nbsp; </font></p>
<p><font face="Helvetica, Arial, sans-serif">If PHP and PHP/OGR were installed
properly, several tables should be displayed on your page, and 'OGR' should
be listed in the 'Extensions' table. <br>
&nbsp; </font></p>
<h2> <font face="Helvetica, Arial, sans-serif">Functions documentation</font></h2>
<font face="Helvetica, Arial, sans-serif"> The C API documentation&nbsp;
was created using Doxygen and is part of the <a
 href="http://gdal.maptools.org/ogr/ogr__api_8h.html">GDAL/OGR documentation</a>.&nbsp; 
In addition to OGR functions, four CPL functions for handling error are made
available to the user:&nbsp; CPLErrorReset, CPLGetLastErrorNo, CPLGetLastErrorMsg 
and CPLGetLastErrorType.&nbsp; Information on these functions can be found 
<a href="http://gdal.maptools.org/ogr/cpl__error_8h.html">on this page</a>. 
</font>
<h2> <font face="Helvetica, Arial, sans-serif">Information and bug reporting</font></h2>
<font face="Helvetica, Arial, sans-serif"> The OGR mailing list can be used
for discussion of developement and user issues related to OGR and related
technology.&nbsp; Mailing list can be used to report bugs as well.&nbsp;
Subscriptions can be done, and archives reviewed <a
 href="http://remotesensing.org/mailman/listinfo/gdal-dev/">on the web.</a></font> 
<h2> <font face="Helvetica, Arial, sans-serif">Examples</font></h2>
<font face="Helvetica, Arial, sans-serif"> There are a few examples showing
how to use the functions in the PHP/OGR extension module.&nbsp; Consult the
README_EXAMPLES.TXT in the <i>examples</i></font> sub-directory of the extension
package to get more information on what is the purpose of each example. 
<p><font face="Helvetica, Arial, sans-serif">Each example must be invoked
from the command-line. </font></p>
<p><font face="Helvetica, Arial, sans-serif">Example:&nbsp; ./php -q ogr2tab.php
/path/to/outputfilename.tab /path/to/sourcefilename.tab </font></p>
<p><font face="Helvetica, Arial, sans-serif">"ogr2ogr.php" shows mostly the
following: <br>
&nbsp; </font></p>
<ul>
 <li><font face="Helvetica, Arial, sans-serif"> Opening an existing data
source with a specific driver</font></li>
  <li><font face="Helvetica, Arial, sans-serif"> Creating a new data source</font></li>
  <li><font face="Helvetica, Arial, sans-serif"> Accessing a layer</font></li>
  <li><font face="Helvetica, Arial, sans-serif"> Creating a new layer</font></li>
  <li><font face="Helvetica, Arial, sans-serif"> Adding fields on a layer</font></li>
  <li><font face="Helvetica, Arial, sans-serif"> Getting features from a
layer</font></li>
  <li><font face="Helvetica, Arial, sans-serif"> Creating new features on
a layer</font></li>
  <li><font face="Helvetica, Arial, sans-serif"> Testing capabilities of
a data source or a layer</font></li>
 
</ul>
<font face="Helvetica, Arial, sans-serif"> "ogr2tab.php" is accomplishing
the same operations as "ogr2ogr.php" but is concerned especially with the
MapInfo File format. </font>
<p><font face="Helvetica, Arial, sans-serif">"ogr_spatialfilter.php" shows
mostly how to set a spatial filter and an attribute filter. </font></p>
<p><font face="Helvetica, Arial, sans-serif">"ogr2tab_spatialfilter.php"
is accomplishing the same operations as "ogr_spatialfilter.php" but is used
exclusively with MapInfo File format. </font></p>
<p><font face="Helvetica, Arial, sans-serif">"ogr_sql.php" demonstrates how
to build an SQL statement and apply an SQL request to a data source. </font></p>
<p><font face="Helvetica, Arial, sans-serif">"ogr2tab_sql.php" is a copy
of "ogr_sql.php" and is concerned with the MapInfo File format. </font></p>
<p><font face="Helvetica, Arial, sans-serif">"ogr_update.php" demonstrates
the following items: </font></p>
<ul>
 <li><font face="Helvetica, Arial, sans-serif"> Accessing a specific feature
by specifying a feature id</font></li>
  <li><font face="Helvetica, Arial, sans-serif"> Getting a field definition</font></li>
  <li><font face="Helvetica, Arial, sans-serif"> Getting a field name</font></li>
  <li><font face="Helvetica, Arial, sans-serif"> Setting a field value</font></li>
  <li><font face="Helvetica, Arial, sans-serif"> Getting a geometry from
a feature</font></li>
  <li><font face="Helvetica, Arial, sans-serif"> Setting a geometry to a
feature</font></li>
 
</ul>
  
<p><font face="Helvetica, Arial, sans-serif"><br>
"ogr2tab_update.php" is a copy of "ogr_update.php" but is concerned with
the MapInfo File format. </font></p>
<p><font face="Helvetica, Arial, sans-serif">"ogr_dump.php" shows the following
functionalities: </font></p>
<ul>
 <li><font face="Helvetica, Arial, sans-serif"> Getting geometry components
from which geometry is built from, like point coordinates for a linestring,
linestring for a polygon and so on</font></li>
  <li><font face="Helvetica, Arial, sans-serif"> Getting geometry name</font></li>
  <li><font face="Helvetica, Arial, sans-serif"> Getting the number of geometry
components</font></li>
 
</ul>
<font face="Helvetica, Arial, sans-serif"> "ogr_write.php" demonstrates the
following functionalities: </font>
<ul>
 <li><font face="Helvetica, Arial, sans-serif"> Accessing a specific layer</font></li>
  <li><font face="Helvetica, Arial, sans-serif"> Creating a new field definition
and assigning it to a layer</font></li>
  <li><font face="Helvetica, Arial, sans-serif"> Creating a new feature on
a layer</font></li>
  <li><font face="Helvetica, Arial, sans-serif"> Setting a field value</font></li>
  <li><font face="Helvetica, Arial, sans-serif"> Creating a new geometry
(point, linestring, polygon) and adding it to a feature</font></li>
 
</ul>
<font face="Helvetica, Arial, sans-serif"> "ogr_setgetfield.php" shows how
to get and to set field values of various types inside a feature. </font><!-- $Id$ --> 
<br>
</body>
</html>
